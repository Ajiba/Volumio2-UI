<div class="box">
  <div class="boxHeader">
    <div class="title">
      <h2 translate="AUTH.MY_VOLUMIO"></h2>
    </div>
  </div>
  <div
    id="authLoginPlugin"
    class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title"><i class="fa fa-user-circle-o"></i> <span translate="AUTH.LOGIN"></span></h3>
    </div>

    <div class="panel-body edit-profile-box">

      <div id="" ng-if="authEditProfileController.user !== null" >
        <div class="container">
          <auth-back-button route-destination="volumio.auth.profile" label="Profile"></auth-back-button>
          <h1>
            Edit Profile
          </h1>
          <hr>
          <div class="row">
            <!-- left column -->
            <div class="col-md-6">
              <div class="text-center" style="margin-bottom: 16px;">
                <auth-avatar-image></auth-avatar-image>
                <h6 translate="AUTH.UPLOAD_PHOTO"></h6>
                <div>
                  <input type="file" class="form-control" ng-model="authEditProfileController.userAvatar" auth-file-on-change on-change-callback="authEditProfileController.avatarChange(file)">
                </div>
                <div ng-if="authEditProfileController.isAvatarChanged === true">
                  <a class="btn btn-success btn-block" style="margin-top: 16px;" ng-click="authEditProfileController.saveAvatar();">
                    <span ng-if="authEditProfileController.uploadingAvatar === true" class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span>
                    <span ng-if="authEditProfileController.uploadingAvatar !== true" class="glyphicon glyphicon-upload"></span>
                    <span translate="UPLOAD"></span>
                  </a>
                </div>
              </div>
            </div>

            <!-- edit form column -->
            <div class="col-md-18 personal-info">

              <div class="alert alert-success alert-dismissable" ng-if="!authEditProfileController.isUserFilledWithMandatory()">
                <a class="panel-close close" data-dismiss="alert">Ã—</a>
                <i class="glyphicon glyphicon-check"></i>
                <span translate="AUTH.COMPLETE_YOUR_PROFILE"></span>
              </div>
              <h3 translate="AUTH.PERSONAL_INFO"></h3>

              <form class="form-horizontal" role="form" ng-submit="authEditProfileController.doEdit()">
                <div class="form-group">
                  <label class="col-lg-6 control-label"><span translate="AUTH.FIRST_NAME"></span>* :</label>
                  <div class="col-lg-16">
                    <input class="form-control" type="text" ng-model="authEditProfileController.form.firstName" required pattern="[A-Za-z0-9 ']{2,}">
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-lg-6 control-label"><span translate="AUTH.LAST_NAME"></span>* :</label>
                  <div class="col-lg-16">
                    <input class="form-control" type="text" ng-model="authEditProfileController.form.lastName" required pattern="[A-Za-z0-9 ']{2,}">
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-lg-6 control-label"><span translate="AUTH.USERNAME"></span>* :</label>
                  <div class="col-lg-16">
                    <input class="form-control" type="text" ng-model="authEditProfileController.form.username" required pattern="[A-Za-z0-9]{5,}">
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-lg-6 control-label"><span translate="AUTH.COUNTRY"></span> :</label>
                  <div class="col-lg-16 country-select">
                    <input class="form-control" country-select data-ng-model="authEditProfileController.form.country">
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-lg-6 control-label"><span translate="AUTH.BIRTHDAY"></span> :</label>
                  <div class="col-lg-16 birthday-picker">
                    <datepicker date-format="dd/MM/yyyy">
                      <input ng-model="authEditProfileController.form.birthday" type="text" date-typer="true"/>
                    </datepicker>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-md-6 control-label"><span translate="AUTH.EMAIL_ADDRESS"></span>* :</label>
                  <div class="col-md-16">
                    <input class="form-control" type="email" required ng-model="authEditProfileController.form.email" ng-change="authEditProfileController.notifyEmailChanged()">
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-md-6 control-label">
                    <span translate="AUTH.PASSWORD"></span>:
                  </label>
                  <div class="col-md-16">
                    <input class="form-control" type="password" ng-model="authEditProfileController.form.password" placeholder="Leave blank to keep current">
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-md-6 control-label">
                    <span translate="AUTH.CONFIRM_PASSWORD"></span>:
                  </label>
                  <div class="col-md-16">
                    <input class="form-control" type="password"  ng-model="authEditProfileController.passwordCheck">
                  </div>
                </div>
                <div class="form-group">
                  <div class="col-md-24">
                    <input type="submit" class="btn btn-success" value="Save Changes" />
                    <a ng-if="authEditProfileController.isUserFilledWithMandatory()" ng-click="authEditProfileController.goToProfile()" class="btn btn-default pull-right">Go to profile</a>
                  </div>
                </div>
              </form>
            </div>
          </div>

          <div class="row">
            <div class="col-xs-24">
              <hr />
              <div class="pull-right">
                <a ng-click='authEditProfileController.deleteUser()' style="cursor: pointer;">
                  <i ng-if="authEditProfileController.deletingUser === false" class="glyphicon glyphicon-remove-sign"></i>
                  <i ng-if="authEditProfileController.deletingUser === true" class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></i>
                  <span translate="AUTH.DELETE_ACCOUNT"></span>
                </a>
              </div>
            </div>
          </div>

        </div>
      </div>

      <div id="" ng-if="authEditProfileController.user === null" >
        <h4 translate="AUTH.NOT_LOGGED_IN"></h4>
        <a ng-click="authEditProfileController.logIn()" class="btn btn-lg btn-success" translate="AUTH.LOGIN"></a>
      </div>


    </div>
  </div>
</div>
